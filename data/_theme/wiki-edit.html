<html>
    <head>
        <title>Atomic Wiki</title>
        <link rel="shortcut icon" href="theme/resources/images/favicon.ico"/>
        <link href="resources/scripts/prettify/prettify.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" type="text/css" href="theme/resources/css/wiki.css"/>
        <link rel="stylesheet" type="text/css" data-template="theme:css"/>
        <link rel="stylesheet" type="text/css" href="theme/resources/css/gallery.css"/>
        <link href="resources/scripts/jquery/ui.dynatree.css" rel="stylesheet" type="text/css"/>
        <link href="resources/scripts/bootstrap-tagsinput.css" rel="stylesheet" type="text/css"/>
    </head>
    <body class="templates:surround?with=templates/page.html&amp;at=content&amp;using=grey-top">
        <div class="col-md-12">
            <div class="app:feed">
                <div class="app:get-or-create-entry entries">
                    <ul id="editor-tabs" class="nav nav-tabs">
                        <li class="active">
                            <a href="#edit" data-toggle="tab">Edit</a>
                        </li>
                        <li>
                            <a href="#preview" data-toggle="tab">Preview</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="edit" class="tab-pane active">
                            <form id="edit-form" class="form form-horizontal" data-template="app:set-form-action" method="POST">
                                <div class="form-group ">
                                    <div class="btn-group col-md-12">
                                        <button id="edit-form-cancel" formnovalidate="formnnovalidate" class="btn btn-default">
                                            <i class="fa fa-times"/> Cancel</button>
                                        <button id="edit-form-save" class="btn btn-default">
                                            <i class="fa fa-save"/> Save</button>
                                        <button id="edit-form-saveAndClose" class="btn btn-primary" type="submit">
                                            <i class="fa fa-share"/> Save and Close</button>
                                    </div>
                                </div>
                                <div class="form-group title">
                                    <label class="control-label col-md-2" for="title">Title</label>
                                    <div class="col-md-9">
                                        <input class="form-control" data-template="app:edit-title" type="text" name="title" placeholder="Title" required="required"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="name">Short Name</label>
                                    <div class="col-md-4">
                                        <input class="form-control" data-template="app:edit-name" type="text" name="sname" placeholder="ShortName" required="required" pattern="[A-Za-zäöüÄÖÜ]{1}[\w-äöüßÄÖÜ]{2,}"/>
                                        <span class="help-block">First sign just a letter, at least three characters required. No spaces.</span>
                                    </div>
                                </div>
                                <template id="perm-group-template">
                                    <tr class="perm-detail">
                                        <td>Group:</td>
                                        <td>
                                            <select name="perm-group" data-template="acl:group-select"/>
                                        </td>
                                        <td>
                                            <input class="perm-group-read" type="checkbox" name="perm-group-read"/> read</td>
                                        <td>
                                            <input class="perm-group-write" type="checkbox" name="perm-group-write"/> write</td>
                                        <td>
                                            <button>
                                                <img src="resources/images/add.png"/>
                                            </button>
                                        </td>
                                        <td>
                                            <button>
                                                <img src="resources/images/delete.png"/>
                                            </button>
                                        </td>
                                    </tr>
                                </template>                                
                                <div class="form-group">
                                    <label for="category" class="control-label col-md-2">Tags</label>
                                    <div class="col-md-9">
                                        <input name="category" class="form-control" data-role="tagsinput" data-template="app:edit-categories"/>
                                    </div>
                                </div>
                                <div class="form-group options">
                                    <label class="col-md-2 control-label" for="is-index">Index Page</label>
                                    <div class="col-md-4">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" class="app:edit-use-index" name="is-index"/>
                                                Check to use this page as the index page for the section
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group options">
                                    <label for="ctype" class="control-label col-md-2">Content type</label>
                                    <div class="col-md-4">
                                        <select name="ctype" data-template="app:edit-content-type" class="form-control">
                                            <option value="markdown">Markdown</option>
                                            <option value="xquery">XQuery</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="accordion-container">
                                  <h3><i class="fa fa-lock"/> Permissions</h3>
                                  <div>
                                    <div class="templates:include?path=templates/permissions.html"/>
                                  </div>
                                </div> 
                                <fieldset>
                                    <ul class="nav nav-tabs">
                                        <li class="active">
                                            <a href="#content-editor" data-toggle="tab">Body</a>
                                        </li>
                                        <li>
                                            <a href="#summary-editor" data-toggle="tab">Summary</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="content-editor">
                                            <div class="btn-group">
                                                <button type="button" class="btn btn-strong btn-default" title="strong">
                                                    <i class="fa fa-bold"/>
                                                </button>
                                                <button type="button" class="btn btn-emphasis btn-default" title="emphasis">
                                                    <i class="fa fa-italic"/>
                                                </button>
                                                <button type="button" class="btn btn-code btn-default" title="code">
                                                    <i class="fa fa-code"/>
                                                </button>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                        -- Heading --
                                                        <span class="caret"/>
                                                    </button>
                                                    <ul class="dropdown-menu toggle-heading" role="menu">
                                                        <li>
                                                            <a href="#" data-heading="1">Heading 1</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-heading="2">Heading 2</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-heading="3">Heading 3</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                        -- Code --
                                                        <span class="caret"/>
                                                    </button>
                                                    <ul class="dropdown-menu toggle-code" role="menu">
                                                        <li>
                                                            <a href="#" data-syntax="xquery">XQuery</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-syntax="xml">XML</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-syntax="java">Java</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-syntax="">Other</a>
                                                        </li>
                                                    </ul>
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-image btn-default" title="Insert/Edit Image">
                                                            <i class="fa fa-image"/>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <textarea name="content" class="app:edit-content?mode=markup"/>
                                        </div>
                                        <div class="tab-pane" id="summary-editor">
                                            <div class="btn-group">
                                                <button type="button" class="btn btn-strong btn-default" title="strong">
                                                    <i class="fa fa-bold"/>
                                                </button>
                                                <button type="button" class="btn btn-emphasis btn-default" title="emphasis">
                                                    <i class="fa fa-italic"/>
                                                </button>
                                                <button type="button" class="btn btn-code btn-default">
                                                    <i class="fa fa-code"/>
                                                </button>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                        -- Heading --
                                                        <span class="caret"/>
                                                    </button>
                                                    <ul class="dropdown-menu toggle-heading" role="menu">
                                                        <li>
                                                            <a href="#" data-heading="1">Heading 1</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-heading="2">Heading 2</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-heading="3">Heading 3</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                        -- Code --
                                                        <span class="caret"/>
                                                    </button>
                                                    <ul class="dropdown-menu toggle-code" role="menu">
                                                        <li>
                                                            <a href="#" data-syntax="xquery">XQuery</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-syntax="xml">XML</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-syntax="java">Java</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" data-syntax="">Other</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-image btn-default" title="Insert/Edit Image">
                                                        <i class="fa fa-image"/>
                                                    </button>
                                                </div>
                                            </div>
                                            <textarea name="summary" class="app:edit-summary?mode=markup"/>
                                        </div>
                                    </div>
                                </fieldset>
                                <input type="hidden" name="entryId" class="app:edit-id"/>
                                <input type="hidden" name="author" class="app:edit-author"/>
                                <input type="hidden" name="published" class="app:edit-publication-date"/>
                                <input type="hidden" name="collection" class="app:edit-collection"/>
                                <input type="hidden" name="resource" class="app:edit-resource"/>
                                <input type="hidden" name="editor" class="app:edit-editor"/>
                                <input type="hidden" name="action" value=""/>
                                <input type="hidden" name="external" value="on"/>
                                <input type="hidden" name="groupPermissions" value=""/>
                            </form>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#attachments" data-toggle="collapse">
                                        <i class="fa fa-paperclip"/> Attachments</a>
                                </div>
                                <div class="panel-collapse collapse" id="attachments">
                                    <div class="panel-body">
                                        <div class="attachment-list">
                                            <table>
                                                <thead>
                                                    <th>Name</th>
                                                    <th>Thumbnail</th>
                                                    <th>Type</th>
                                                </thead>
                                                <tbody class="app:attachments attachments"/>
                                            </table>
                                        </div>
                                        <div id="image-upload">
                                            <p>To upload: drop one or more files on this dialog or click on the button below.</p>
                                            <form class="file_upload" action="modules/upload.xql" method="POST" enctype="multipart/form-data">
                                                <div class="file_upload_body">
                                                    <input type="file" name="uploadedfiles[]" multiple="multiple"/>
                                                    <input name="collection" value="/db/abc" type="hidden"/>
                                                    <button>Upload</button>
                                                    <div class="file_upload_label">Upload</div>
                                                </div>
                                            </form>
                                            <div class="overall-progress" style="opacity: 0">
                                                <div class="bar" style="width: 0%;"/>
                                                <div class="progress-label">0%</div>
                                            </div>
                                            <div class="queue">
                                                <table class="files"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="preview"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal" id="confirmDialog" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">×</span>
                            <span class="sr-only">Close</span>
                        </button>
                        <h3>Confirm</h3>
                    </div>
                    <div class="modal-body"/>
                    <div class="modal-footer">
                        <a class="btn-primary btn ok-button">
                            <i class="icon-ok"/> OK
                        </a>
                        <a class="btn btn cancel-button">
                            <i class="icon-remove"/> Cancel
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal" id="image-dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">×</span>
                            <span class="sr-only">Close</span>
                        </button>
                        <h3 class="title">Insert Link</h3>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal" action="">
                            <div class="form-group">
                                <label class="control-label col-md-4" for="url">URL:</label>
                                <div class="col-md-8">
                                    <input class="form-control" type="text" name="url" placeholder="http://" required="required"/>
                                    <span class="help-block">Enter absolute URL or select resource from tree</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4" for="title">Title:</label>
                                <div class="col-md-8">
                                    <input class="form-control" type="text" name="title" placeholder="Title"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox col-md-8 col-md-offset-4">
                                    <label>
                                        <input type="checkbox" name="html"/> insert HTML figure
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4" for="width">Width:</label>
                                <div class="col-md-8">
                                    <input class="form-control" type="text" name="width"/>
                                    <span class="help-block">Set either width or height</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4" for="height">Height:</label>
                                <div class="col-md-8">
                                    <input class="form-control" type="text" name="height"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4" for="align">Alignment:</label>
                                <div class="col-md-8">
                                    <select class="form-control" name="align">
                                        <option value="wysiwyg-text-align-center" selected="selected">Center</option>
                                        <option value="wysiwyg-img-float-left">Left</option>
                                        <option value="wysiwyg-img-float-right">Right</option>
                                        <option value="wysiwyg-float-left">Left 50%</option>
                                        <option value="wysiwyg-float-right">Right 50%</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                        <div class="gallery-container">
                            <div class="header">
                                <form class="form-search">
                                    <select name="filterCollection" id="filterCollection" class="form-control">
                                        <option value="all" selected="selected">All</option>
                                        <option value="local">Local</option>
                                        <optgroup label="Ziziphus" class="gallery:get-ziziphus-collections"/>
                                    </select>
                                    <div class="input-group">
                                        <input name="query" id="query" type="search" placeholder="search" class="form-control"/>
                                        <span class="input-group-btn">
                                            <button id="query-images" class="btn btn-default" type="button">
                                                <i class="fa fa-refresh"/> Refresh</button>
                                        </span>
                                    </div>
                                    <input name="start" id="imagePickerStart" value="1" type="hidden"/>
                                    <input name="max" id="imagePickerMax" value="8" type="hidden"/>
                                </form>
                            </div>
                            <div id="imageSelector"/>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a class="btn btn-default close-button">
                            <i class="icon-remove"/> Cancel
                        </a>
                        <a class="btn-primary btn apply-button">
                            <i class="icon-remove"/> Apply
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript" src="$shared/resources/scripts/jquery/jquery-1.7.1.min.js"/>
        <script type="text/javascript" src="resources/scripts/jquery/jquery-ui.min.js"/>
        <script type="text/javascript" src="resources/scripts/jquery/jquery.dynatree.min.js"/>
        <script type="text/javascript" src="resources/scripts/jquery/jquery.fileupload.js"/>
        <script type="text/javascript" src="resources/scripts/bootstrap-tagsinput.min.js"/>
        <script type="text/javascript" src="resources/scripts/bootstrap.min.js"/>
        <script src="resources/scripts/atomic/common.js" type="text/javascript" charset="utf-8"/>
        <script src="$shared/resources/scripts/ace/ace.js" type="text/javascript" charset="utf-8"/>
        <script src="$shared/resources/scripts/ace/theme-tomorrow.js" type="text/javascript" charset="utf-8"/>
        <script type="text/javascript" src="$shared/resources/scripts/ace/theme-clouds.js"/>
        <script src="$shared/resources/scripts/ace/mode-markdown.js" type="text/javascript" charset="utf-8"/>
        <script type="text/javascript" src="$shared/resources/scripts/ace/mode-javascript.js"/>
        <script type="text/javascript" src="$shared/resources/scripts/ace/mode-text.js"/>
        <script type="text/javascript" src="$shared/resources/scripts/ace/mode-xquery.js"/>
        <script type="text/javascript" src="$shared/resources/scripts/ace/mode-xml.js"/>
        <script src="resources/scripts/atomic/manage.js" type="text/javascript" charset="utf-8"/>
        <script src="resources/scripts/atomic/markup-editor.js" type="text/javascript" charset="utf-8"/>
        <script src="resources/scripts/atomic/attachments.js" type="text/javascript" charset="utf-8"/>
        <script type="text/javascript" src="resources/scripts/atomic/highlight.js"/>
    </body>
</html>
